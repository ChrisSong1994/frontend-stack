# chmod 权限修改

`chmod` 是 Linux/Unix 系统中用于修改文件或目录权限的命令。权限分为三类：**所有者（Owner）**、**所属组（Group）** 和 **其他用户（Others）**。每种权限可以用符号表示（如 `rwx`）或数字表示（如 `755`）。

---

### 1. 基本语法
```bash
chmod [选项] 模式 文件或目录
```

- **选项**：常用的选项包括 `-R`（递归修改目录及其内容）。
- **模式**：权限模式，可以是符号模式（如 `u+x`）或数字模式（如 `755`）。
- **文件或目录**：要修改权限的目标。

---

### 2. 权限类型
权限分为三种：
- **r（读）**：读取文件内容或列出目录内容。
- **w（写）**：修改文件内容或在目录中创建/删除文件。
- **x（执行）**：执行文件或进入目录。

---

### 3. 符号模式
符号模式通过以下方式指定权限：
- **用户类别**：
  - `u`：所有者（User）。
  - `g`：所属组（Group）。
  - `o`：其他用户（Others）。
  - `a`：所有用户（All，等同于 `ugo`）。
- **操作符**：
  - `+`：添加权限。
  - `-`：移除权限。
  - `=`：设置权限（覆盖原有权限）。
- **权限**：
  - `r`：读。
  - `w`：写。
  - `x`：执行。

#### 示例：
- 给所有者添加执行权限：
  ```bash
  chmod u+x file.txt
  ```
- 给所有用户添加读权限：
  ```bash
  chmod a+r file.txt
  ```
- 移除所属组和其他用户的写权限：
  ```bash
  chmod go-w file.txt
  ```
- 设置所有用户的权限为 `rwx`：
  ```bash
  chmod a=rwx file.txt
  ```

---

### 4. 数字模式
数字模式使用三位八进制数表示权限：
- 第一位：所有者权限。
- 第二位：所属组权限。
- 第三位：其他用户权限。

每个权限对应的数字：
- `r` = 4
- `w` = 2
- `x` = 1

将所需权限的数字相加即可。

#### 示例：
- 设置权限为 `rwxr-xr--`（所有者：`rwx`，所属组：`r-x`，其他用户：`r--`）：
  ```bash
  chmod 754 file.txt
  ```
  解释：
  - 所有者：`4 (r) + 2 (w) + 1 (x) = 7`
  - 所属组：`4 (r) + 1 (x) = 5`
  - 其他用户：`4 (r) = 4`

- 设置权限为 `rw-r--r--`：
  ```bash
  chmod 644 file.txt
  ```

---

### 5. 递归修改目录权限
使用 `-R` 选项递归修改目录及其内容的权限。

#### 示例：
- 递归设置目录及其内容为 `755`：
  ```bash
  chmod -R 755 mydir/
  ```

---

### 6. 特殊权限
除了 `rwx`，还有一些特殊权限：
- **SUID（Set User ID）**：用文件所有者的权限执行文件。
  - 符号模式：`u+s`
  - 数字模式：`4`（如 `4755`）。
- **SGID（Set Group ID）**：用文件所属组的权限执行文件。
  - 符号模式：`g+s`
  - 数字模式：`2`（如 `2755`）。
- **Sticky Bit**：只有文件所有者或 root 可以删除文件。
  - 符号模式：`+t`
  - 数字模式：`1`（如 `1755`）。

#### 示例：
- 设置 SUID：
  ```bash
  chmod u+s file.txt
  ```
- 设置 SGID：
  ```bash
  chmod g+s file.txt
  ```
- 设置 Sticky Bit：
  ```bash
  chmod +t file.txt
  ```

---

### 7. 查看文件权限
使用 `ls -l` 查看文件或目录的权限：
```bash
ls -l file.txt
```
输出示例：
```
-rwxr-xr-- 1 user group 1024 Oct 1 12:34 file.txt
```
- 第一列（如 `-rwxr-xr--`）表示权限。
- 第 3 列（如 `user`）表示所有者。
- 第 4 列（如 `group`）表示所属组。

---

### 8. 常见权限设置
- **可执行脚本**：`755`
  ```bash
  chmod 755 script.sh
  ```
- **配置文件**：`644`
  ```bash
  chmod 644 config.conf
  ```
- **私有文件**：`600`
  ```bash
  chmod 600 private.txt
  ```

---

通过以上方法，你可以灵活使用 `chmod` 管理文件和目录的权限。